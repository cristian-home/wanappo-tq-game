import{c as r,o as n,a as o,r as V,d as $,u as E,b as z,e as R,f as _,g as U,w as A,h as u,i as t,j as i,m as d,_ as x,F as q,k as H,l as g,t as f,n as v,p as D,q as w,s as W,v as J}from"./index-BZGOoacQ.js";const M="/wanappo-tq-game/assets/N4FaceLook-DJX4l3PB.webp",I=(p,e)=>{const c=p.__vccOpts||p;for(const[y,m]of e)c[y]=m;return c},X={},K={class:"rounded-w-box flex flex-row items-center justify-center gap-4 py-2 text-2xl"},Q={class:"text-left text-lg font-bold"};function Y(p,e){return n(),r("div",K,[e[0]||(e[0]=o("img",{src:M,alt:"N4 Face",class:"h-16 w-16 shrink-0"},null,-1)),o("div",Q,[V(p.$slots,"default")])])}const Z=I(X,[["render",Y]]),ee={class:"relative flex h-dvh w-dvw flex-col items-center justify-center px-4 py-8"},te={key:0,class:"flex w-xl max-w-full flex-col items-center justify-center gap-6"},ae={class:"text-orange-400"},se={key:0,class:"block animate-pulse font-bold text-red-500"},oe={class:"h-64 w-auto max-w-full"},le=["src"],ne={key:1},ie={key:1,class:"text-center"},re=["src"],ce=$({__name:"GamePlayView",setup(p){const e=E(),c=z(),y=W(),m=R(!1),[b,h]=_(),[k,L]=_(),[P,C]=_(),O=async()=>await new Promise(a=>{if(h===void 0){a(!0);return}h(b.value,{opacity:[1,0],scale:[1,0]},{duration:.3}).then(()=>{a(!0)})}),j=async()=>await new Promise(a=>{if(L===void 0){a(!0);return}L(k.value,{opacity:[1,0],scale:[1,.8]},{duration:.3}).then(()=>{a(!0)})}),N=async()=>await new Promise(a=>{if(C===void 0){a(!0);return}C("button",{opacity:[1,0],scale:[1,0]},{duration:.3,delay:s=>s*.1,ease:"backInOut"}).then(()=>{a(!0)})}),G=async()=>{const l=O(),a=j(),s=N();return await Promise.all([l,a,s])},F=()=>{e.canProceedToNextLevel&&(e.currentLevelIndex<e.totalLevels-1?(c.playLevelUpSound(),e.nextLevel(),m.value=!1):(c.playGameWinSound(),e.completeGame(),y.push({name:"game-win"})))},B=()=>{m.value=!0,setTimeout(()=>{m.value=!1,setTimeout(()=>{F()},500)},2500)},T=l=>{if(!e.currentLevel||e.isLevelCompleted)return;const a=e.currentLevel.options.find(s=>s.id===l);a&&(a.isCorrect?c.playRightAnswerSound():c.playWrongAnswerSound(),e.selectOption(l))};return U(async(l,a,s)=>{e.isLevelCompleted||e.isGameOver?(await G(),s()):s(!1)}),A(()=>e.allCorrectOptionsSelected,l=>{l&&setTimeout(()=>{const a=e.currentLevelIndex<e.totalLevels-1?"¡Felicidades! Has completado el nivel correctamente.":"¡Felicidades! Has completado todos los niveles del juego.";console.log(a),B()},500)},{immediate:!0}),A(()=>e.isGameOver,l=>{l&&setTimeout(async()=>{y.push({name:"game-over"})},1e3)},{immediate:!0}),(l,a)=>(n(),r("div",ee,[t(e).currentLevel?(n(),r("div",te,[u(t(d).div,{class:"-mb-4 h-12 text-center text-xs opacity-75",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2}},{default:i(()=>[o("span",null,"Nivel "+f(t(e).currentLevelNumber)+" de "+f(t(e).totalLevels),1),a[0]||(a[0]=o("br",null,null,-1)),o("span",ae," Movimientos restantes: "+f(t(e).maxAttemptsForCurrentLevel-t(e).currentLevelAttempts),1),t(e).currentLevelAttempts===t(e).maxAttemptsForCurrentLevel-1?(n(),r("span",se," ¡Último intento! ")):g("",!0)]),_:1,__:[0]}),u(t(d).div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeInOut"},class:"flex h-20 w-96 max-w-full items-center justify-center",ref_key:"headerScope",ref:b},{default:i(()=>[u(Z,{class:"max-w-full before:backdrop-blur-[2px]"},{default:i(()=>[u(t(x),{mode:"wait"},{default:i(()=>[(n(),v(t(d).span,{class:"w-full",key:t(e).currentLevel.id,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},{default:i(()=>[D(f(t(e).currentLevel.question),1)]),_:1}))]),_:1})]),_:1})]),_:1},512),o("div",oe,[u(t(x),{mode:"wait"},{default:i(()=>[t(e).currentLevel.incompleteImage?(n(),v(t(d).img,{key:t(e).currentLevel.id,src:t(w)(t(e).currentLevel.incompleteImage).value,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:0,duration:.5,ease:"easeInOut"},alt:"Game Background",class:"h-full w-full object-contain drop-shadow-xl",ref_key:"coverImageScope",ref:k},null,8,["src"])):g("",!0)]),_:1})]),o("div",{class:"grid w-full grid-cols-2 grid-rows-[4rem_4rem_4rem] gap-x-8 gap-y-8",ref_key:"optionsScope",ref:P},[(n(!0),r(q,null,H(t(e).randomOrderedOptions,(s,S)=>(n(),v(t(x),{mode:"wait",key:S},{default:i(()=>[(n(),v(t(d).button,{key:s.id,class:J(["btn flex items-center justify-center px-4 py-0 text-lg font-bold",{"btn-success":s.isCorrect&&s.isSelected,"btn-danger":!s.isCorrect&&s.isSelected}]),initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3,delay:0+S*.1,ease:"backInOut"},disabled:t(e).isLevelCompleted,onClick:ue=>T(s.id)},{default:i(()=>[s.imageUrl?(n(),r("img",{key:0,src:t(w)(s.imageUrl).value,class:"h-16 max-w-full object-contain drop-shadow-sm drop-shadow-black/50",alt:"Option Image"},null,8,le)):(n(),r("span",ne,f(s.text),1))]),_:2},1032,["transition","class","disabled","onClick"]))]),_:2},1024))),128))],512)])):(n(),r("div",ie,a[1]||(a[1]=[o("p",null,"Cargando nivel...",-1)]))),u(t(x),null,{default:i(()=>{var s;return[m.value&&((s=t(e).currentLevel)!=null&&s.completeImage)?(n(),v(t(d).div,{key:"complete-"+t(e).currentLevel.id,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},{default:i(()=>[u(t(d).div,{class:"relative z-10 flex items-center justify-center",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.8,ease:"backOut"}},{default:i(()=>[a[2]||(a[2]=o("div",{class:"bg-gradient-radial absolute inset-0 scale-150 rounded-full from-yellow-400/30 via-orange-400/20 to-transparent blur-xl"},null,-1)),o("img",{src:t(w)(t(e).currentLevel.completeImage).value,alt:"Complete Product",class:"relative z-10 h-80 w-80 max-w-full object-contain brightness-110 drop-shadow-2xl saturate-110 filter"},null,8,re),a[3]||(a[3]=o("div",{class:"absolute inset-0 animate-ping"},[o("div",{class:"absolute top-4 left-4 h-2 w-2 animate-pulse rounded-full bg-yellow-300"}),o("div",{class:"absolute top-8 right-8 h-1 w-1 animate-pulse rounded-full bg-white delay-300"}),o("div",{class:"absolute bottom-6 left-12 h-1.5 w-1.5 animate-pulse rounded-full bg-yellow-200 delay-700"}),o("div",{class:"absolute right-6 bottom-12 h-1 w-1 animate-pulse rounded-full bg-orange-300 delay-500"})],-1))]),_:1,__:[2,3]})]),_:1})):g("",!0)]}),_:1})]))}}),me=I(ce,[["__scopeId","data-v-6f9e1fdf"]]);export{me as default};
